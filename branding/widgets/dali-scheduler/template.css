/* ===== DALI Task Scheduler Widget - CSS (Light Theme) ===== */
/* SignConnect design language: white cards, amber accents, slate text */

#dali-scheduler {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  background: #f8fafc;
  color: #334155;
  min-height: 100%;
  padding: 16px;
  box-sizing: border-box;
  position: relative;
  font-size: 13px;
  line-height: 1.5;
  overflow: auto;
}

#dali-scheduler *, #dali-scheduler *::before, #dali-scheduler *::after {
  box-sizing: border-box;
}

/* ===== LOADING OVERLAY ===== */
.loading-overlay {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(248, 250, 252, 0.92);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  gap: 12px;
}

.spinner {
  width: 36px;
  height: 36px;
  border: 3px solid #e2e8f0;
  border-top-color: #f59e0b;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading-text {
  color: #64748b;
  font-size: 13px;
  font-weight: 500;
}

/* ===== TOAST ===== */
.toast {
  position: absolute;
  top: 12px;
  right: 12px;
  padding: 12px 20px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  z-index: 1100;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  max-width: 400px;
  animation: slideIn 0.25s ease-out;
}

@keyframes slideIn {
  from { transform: translateX(30px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

.toast-success { background: #ecfdf5; color: #065f46; border: 1px solid #a7f3d0; }
.toast-error   { background: #fef2f2; color: #991b1b; border: 1px solid #fecaca; }
.toast-info    { background: #eff6ff; color: #1e40af; border: 1px solid #bfdbfe; }
.toast-warning { background: #fffbeb; color: #92400e; border: 1px solid #fde68a; }

/* ===== HEADER ===== */
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: #ffffff;
  border: 1px solid #e2e8f0;
  border-radius: 10px;
  margin-bottom: 12px;
  flex-wrap: wrap;
  gap: 8px;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.header-icon {
  width: 24px;
  height: 24px;
  color: #f59e0b;
  flex-shrink: 0;
}

.header-title {
  font-size: 16px;
  font-weight: 700;
  color: #0f172a;
  margin: 0;
  letter-spacing: -0.01em;
}

.header-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

/* ===== BUTTONS ===== */
.btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  border: none;
  border-radius: 7px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.15s ease;
  letter-spacing: 0.01em;
}

.btn svg {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
}

.btn-primary {
  background: #f59e0b;
  color: #ffffff;
}
.btn-primary:hover { background: #d97706; }
.btn-primary:disabled { background: #e2e8f0; color: #94a3b8; cursor: not-allowed; }

.btn-secondary {
  background: #f1f5f9;
  color: #475569;
  border: 1px solid #e2e8f0;
}
.btn-secondary:hover { background: #e2e8f0; }

.btn-danger {
  background: #ef4444;
  color: #ffffff;
}
.btn-danger:hover { background: #dc2626; }

.btn-danger-outline {
  background: transparent;
  color: #ef4444;
  border: 1px solid #fecaca;
}
.btn-danger-outline:hover { background: #fef2f2; }

.btn-small {
  padding: 5px 10px;
  font-size: 11px;
  border-radius: 6px;
}

.btn-action {
  background: transparent;
  color: #64748b;
  border: 1px solid #e2e8f0;
}
.btn-action:hover { background: #f1f5f9; color: #334155; }

.btn-icon {
  background: transparent;
  border: none;
  color: #94a3b8;
  cursor: pointer;
  padding: 4px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
}
.btn-icon:hover { background: #f1f5f9; color: #475569; }

.btn-remove {
  color: #ef4444;
}
.btn-remove:hover { background: #fef2f2; color: #dc2626; }

/* ===== SECTIONS ===== */
.section {
  background: #ffffff;
  border: 1px solid #e2e8f0;
  border-radius: 10px;
  padding: 14px 16px;
  margin-bottom: 12px;
}

.section-label {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: #94a3b8;
  margin-bottom: 10px;
}

/* ===== TASK TABLE ===== */
#task-table-container { overflow-x: auto; }

.task-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
}

.task-table thead th {
  text-align: left;
  padding: 8px 10px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: #94a3b8;
  border-bottom: 2px solid #f1f5f9;
  white-space: nowrap;
}

.task-table tbody td {
  padding: 10px;
  border-bottom: 1px solid #f1f5f9;
  vertical-align: middle;
}

.task-table tbody tr:hover {
  background: #fefce8;
}

.task-table tbody tr:last-child td {
  border-bottom: none;
}

.profile-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  background: #fef3c7;
  color: #92400e;
  border-radius: 8px;
  font-weight: 700;
  font-size: 12px;
}

.star { font-size: 14px; }
.star-full { color: #f59e0b; }
.star-empty { color: #e2e8f0; }

.date-cell {
  font-size: 11px;
  color: #64748b;
  white-space: nowrap;
}

.schedule-cell {
  font-size: 11px;
  max-width: 220px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.actions-cell {
  display: flex;
  gap: 4px;
  white-space: nowrap;
}

.badge {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.badge-success { background: #ecfdf5; color: #065f46; }
.badge-warning { background: #fffbeb; color: #92400e; }
.badge-error   { background: #fef2f2; color: #991b1b; }
.badge-default { background: #f1f5f9; color: #64748b; }

/* ===== EMPTY STATE ===== */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
  gap: 8px;
}

.empty-state svg { opacity: 0.2; color: #94a3b8; }
.empty-state p { margin: 0; color: #94a3b8; font-size: 14px; }
.empty-hint { font-size: 12px; color: #cbd5e1; }

/* ===== TIMELINE ===== */
.timeline-container {
  width: 100%;
  overflow-x: auto;
}

.timeline-empty {
  text-align: center;
  color: #94a3b8;
  padding: 20px;
  font-size: 13px;
}

/* ===== STATUS BAR ===== */
.status-section {
  padding: 10px 16px;
}

.status-bar {
  display: flex;
  align-items: center;
  gap: 20px;
  flex-wrap: wrap;
}

.status-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
}

.status-label {
  font-weight: 600;
  color: #94a3b8;
  white-space: nowrap;
}

.status-value {
  color: #334155;
}

.status-pass { color: #059669; font-weight: 600; }
.status-fail { color: #dc2626; font-weight: 600; }
.status-time { color: #94a3b8; font-size: 11px; }

.status-refresh {
  margin-left: auto;
  gap: 10px;
}

.status-hint {
  color: #94a3b8;
  font-size: 11px;
}

/* ===== OVERLAY (Form / Modal) ===== */
.overlay {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  z-index: 500;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding-top: 30px;
}

.overlay-backdrop {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(15, 23, 42, 0.3);
  backdrop-filter: blur(2px);
}

.form-panel {
  position: relative;
  z-index: 1;
  width: 90%;
  max-width: 680px;
  max-height: 85vh;
  overflow-y: auto;
  background: #ffffff;
  border: 1px solid #e2e8f0;
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.12);
}

.modal-panel {
  position: relative;
  z-index: 1;
  width: 90%;
  max-width: 520px;
  background: #ffffff;
  border: 1px solid #e2e8f0;
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.12);
}

.modal-small {
  max-width: 400px;
}

.form-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid #f1f5f9;
}

.form-header h2 {
  margin: 0;
  font-size: 16px;
  font-weight: 700;
  color: #0f172a;
}

.form-body {
  padding: 16px 20px;
}

.form-body p {
  margin: 0 0 16px 0;
  color: #475569;
  font-size: 14px;
}

/* ===== FORM LAYOUT ===== */
.form-row {
  display: flex;
  gap: 12px;
  margin-bottom: 14px;
}

.two-col > * { flex: 1; min-width: 0; }
.three-col > * { flex: 1; min-width: 0; }

.form-group {
  margin-bottom: 14px;
}

.form-group label {
  display: block;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  color: #64748b;
  margin-bottom: 5px;
}

.input {
  width: 100%;
  padding: 8px 10px;
  background: #f8fafc;
  color: #334155;
  border: 1px solid #e2e8f0;
  border-radius: 7px;
  font-size: 13px;
  font-family: inherit;
  transition: border-color 0.15s ease;
}

.input:focus {
  outline: none;
  border-color: #f59e0b;
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);
}

.input-sm {
  padding: 5px 8px;
  font-size: 12px;
}

select.input {
  cursor: pointer;
}

.end-date-group {
  display: flex;
  align-items: center;
  gap: 10px;
}

.checkbox-label {
  display: flex !important;
  align-items: center;
  gap: 5px;
  font-size: 12px !important;
  text-transform: none !important;
  cursor: pointer;
  white-space: nowrap;
  color: #475569 !important;
}

.checkbox-label input[type=checkbox] {
  accent-color: #f59e0b;
  width: 16px;
  height: 16px;
  cursor: pointer;
}

/* ===== DAYS ROW ===== */
.days-row {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.day-checkbox {
  display: flex !important;
  flex-direction: column;
  align-items: center;
  gap: 3px;
  cursor: pointer;
}

.day-checkbox input[type=checkbox] {
  accent-color: #f59e0b;
  width: 16px;
  height: 16px;
}

.day-checkbox span {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  color: #64748b;
}

/* ===== TIMESLOTS ===== */
.timeslots-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}

.timeslots-header label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  color: #64748b;
}

.timeslot-card {
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  margin-bottom: 8px;
  overflow: hidden;
}

.timeslot-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  background: #f1f5f9;
  border-bottom: 1px solid #e2e8f0;
}

.timeslot-label {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  color: #64748b;
}

.timeslot-body {
  padding: 12px;
}

/* ===== SLOT ROW HELPERS ===== */
.slot-row-onoff {
  display: flex !important;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
  margin-bottom: 10px;
}

.slot-direction-label {
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 3px 8px;
  border-radius: 4px;
}

.slot-direction-label-on {
  background: #ecfdf5;
  color: #059669;
}

.slot-direction-label-off {
  background: #fef2f2;
  color: #dc2626;
}

.slot-arrow {
  color: #94a3b8;
  font-size: 16px;
  padding: 0 2px;
}

.slot-group-narrow {
  min-width: 80px;
}

.time-select-group {
  display: flex;
  align-items: center;
  gap: 2px;
}

.time-colon {
  color: #94a3b8;
  font-weight: 700;
  font-size: 14px;
}

.offset-select {
  width: 80px;
}

/* ===== DIM SLIDER ===== */
.slot-row-dim {
  display: flex;
  align-items: center;
  gap: 10px;
}

.slot-dim-label {
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: #64748b;
  width: 30px;
}

.slider-dim {
  -webkit-appearance: none;
  appearance: none;
  height: 6px;
  border-radius: 3px;
  background: linear-gradient(to right, #f59e0b 0%, #f59e0b 100%, #e2e8f0 100%, #e2e8f0 100%);
  outline: none;
  cursor: pointer;
  flex: 1;
}

.slider-dim::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #f59e0b;
  border: 2px solid #ffffff;
  box-shadow: 0 1px 4px rgba(0,0,0,0.15);
  cursor: pointer;
}

.slider-dim::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #f59e0b;
  border: 2px solid #ffffff;
  box-shadow: 0 1px 4px rgba(0,0,0,0.15);
  cursor: pointer;
}

.dim-val {
  font-size: 12px;
  font-weight: 700;
  color: #92400e;
  width: 36px;
  text-align: right;
}

/* ===== FORM ACTIONS ===== */
.form-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 16px;
  padding-top: 14px;
  border-top: 1px solid #f1f5f9;
}

/* ===== SCROLLBAR ===== */
#dali-scheduler ::-webkit-scrollbar { width: 6px; height: 6px; }
#dali-scheduler ::-webkit-scrollbar-track { background: #f1f5f9; border-radius: 3px; }
#dali-scheduler ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
#dali-scheduler ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

/* ===== RESPONSIVE ===== */
@media (max-width: 640px) {
  .header { flex-direction: column; align-items: flex-start; }
  .header-actions { width: 100%; }
  .form-row.three-col { flex-direction: column; }
  .slot-row-onoff { flex-direction: column; align-items: flex-start; }
  .status-bar { flex-direction: column; align-items: flex-start; }
  .status-refresh { margin-left: 0; }
}
